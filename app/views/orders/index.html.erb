<div class="container">
  <p id="notice"><%= notice %></p>

  <h1>Orders</h1>
  <%#= link_to 'New Order', new_order_path, class: "btn btn-primary", style: 'float: right;margin-bottom: 10px;'%>

  <form action="/orders">
    <div class="form-group">
      <input type="text" name="query" value="<%= params[:query] %>" class='form-control col-6' placeholder="Search using product or variant id">
    </div>
  </form>

  <table class="table table-striped">
    <thead>
      <tr>
        <th>Order Id</th>
        <th>Order qty</th>
        <th>Order Total</th>
        <th>Status</th>
        <th>Created at</th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @orders.each do |order| %>
        <tr>
          <td><%= order.id %></td>
          <td><%= order.order_qty %></td>
          <td><%= order.total %></td>
          <td><%= order.status %></td>
          <td><%= order.created_at.strftime('%Y-%m-%d, %I:%M:%S:%p') %></td>
          <td><%#= link_to 'Edit', edit_order_path(order) %></td>
          <% if current_user.role == "admin" %>
            <td>
              <%= link_to 'Detail', order %>
            </td>
            <td>
              <%= link_to 'Delete', order, method: :delete, data: { confirm: 'Are you sure?' } %>
            </td>
              <% if order.status === 'Processed' %>
                <td>
                  <%= link_to 'Cancel', cancel_order_path(id: order.id), data: { confirm: 'Are you sure?' } %>
                </td>
              <% end %>
            </td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>

  <div class="pagination-index">
    <%= will_paginate @orders %>
  </div>
</div>

<style type="text/css">
  .pagination-index .pagination{
    justify-content: center !important;
  }
</style>
